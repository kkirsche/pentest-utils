#!/bin/bash

if [ -z $1 ]; then
	echo '[!] Usage: unicorn-staged <target>'
	exit 1
fi

target=$1

tcpfile='unicorn-tcp.txt'
if ! [ -f $tcpfile ]; then
echo "[+] Beginning TCP UnicornScan (all ports) of $target"
	unicornscan -i tap0 -mT ${target}:a -l ${tcpfile}
  echo "[*] TCP UnicornScan complete"
  cat ${tcpfile}
else
	echo "[+] TCP UnicornScan file already exists. Skipping..."
fi

udpfile='unicorn-udp.txt'
if ! [ -f $udpfile ]; then
echo "[+] Beginning UDP UnicornScan (all ports) of $target"
	unicornscan -i tap0 -mU ${target}:a -l ${udpfile}
  echo "[*] UDP UnicornScan complete"
  cat ${udpfile}
else
	echo "[+] UDP UnicornScan file already exists. Skipping..."
fi
