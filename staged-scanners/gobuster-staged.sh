#!/bin/bash

set -e
set -o pipefail
IFS=$'\n\t'

if [ $# -ne 2 ]; then
    echo "[!] Usage: gobuster-staged <target> <port>"
    exit 1
fi

target=$1
port=$2

echo '[+] GoBuster SecLists common scan'
gobuster -k -u "${target}:${port}" -w /usr/share/seclists/Discovery/Web_Content/common.txt |& tee "gobuster-${port}-seclists_common.txt"
echo '[*] SecLists common list scan completed'

echo '[+] GoBuster SecLists big scan'
gobuster -k -u "${target}:${port}" -w /usr/share/seclists/Discovery/Web_Content/big.txt |& tee "gobuster-${port}-seclists_big.txt"
echo '[*] SecLists big list scan completed'

echo '[+] GoBuster Dirbuster lowercase medium scan'
gobuster -k -u "${target}:${port}" -w /usr/share/dirbuster/wordlists/directory-list-lowercase-2.3-medium.txt |& tee "gobuster-${port}-dirbbuster_dirlist_medium.txt"
echo '[*] SecLists big list scan completed'
