#!/bin/bash

if [ -z $1 ]; then
	echo '[!] Usage: ./http-enumerator <target>'
	exit 1
fi

target=$1

httpenum='01-http-enum'
if ! [ -f ${httpenum}.nmap ]; then
  echo "[+] Beginning nmap HTTP(S) script enumeration against ${target}"
  nmap -sS -T4 -p80,443,8080 --script http-vuln*,http-adobe-coldfusion-apsa1301,http-apache-server-status,http-shellshock,http-sitemap-generatorhttp-php-version,http-title,http-waf*,http-favicon,http-enum -oA ${httpenum} --stats-every 60s ${target}
else
  echo "[+] nmap HTTP(S) enumeration seems to already exist. Skipping..."
fi

niktoenum='02-nikto-enum'
if ! [ -f ${httpenum}.nmap ]; then
  echo "[+] Beginning nikto HTTP script enumeration against ${target}"
  nikto -host ${target} -port 80 -Format txt -output ${niktoenum}-80.txt
else
  echo "[+] nmap HTTP(S) enumeration seems to already exist. Skipping..."
fi
